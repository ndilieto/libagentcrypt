<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libagentcrypt: libagentcrypt.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libagentcrypt
   &#160;<span id="projectnumber">1.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">libagentcrypt.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2edc5b8b7ab4c5ebab073315f3d1caf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#af2edc5b8b7ab4c5ebab073315f3d1caf">agc_encrypt</a> (const char *agent, const char *key_sha256, const uint8_t *cleartext, size_t cleartext_size, size_t pad_size, uint8_t **ciphertext, size_t *ciphertext_size)</td></tr>
<tr class="memdesc:af2edc5b8b7ab4c5ebab073315f3d1caf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encrypt and authenticate a block of data, for later decryption by <a class="el" href="libagentcrypt_8h.html#a0539aac42176c2bf7115ed55cd41a41c" title="Decrypt and verify a block of data encrypted by agc_encrypt() ">agc_decrypt()</a>  <a href="#af2edc5b8b7ab4c5ebab073315f3d1caf">More...</a><br /></td></tr>
<tr class="separator:af2edc5b8b7ab4c5ebab073315f3d1caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0539aac42176c2bf7115ed55cd41a41c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a0539aac42176c2bf7115ed55cd41a41c">agc_decrypt</a> (const char *agent, const uint8_t *ciphertext, size_t ciphertext_size, uint8_t **cleartext, size_t *cleartext_size)</td></tr>
<tr class="memdesc:a0539aac42176c2bf7115ed55cd41a41c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrypt and verify a block of data encrypted by <a class="el" href="libagentcrypt_8h.html#af2edc5b8b7ab4c5ebab073315f3d1caf" title="Encrypt and authenticate a block of data, for later decryption by agc_decrypt() ">agc_encrypt()</a>  <a href="#a0539aac42176c2bf7115ed55cd41a41c">More...</a><br /></td></tr>
<tr class="separator:a0539aac42176c2bf7115ed55cd41a41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f95c12bba3517287dc11017325a53c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a2f95c12bba3517287dc11017325a53c0">agc_fencrypt</a> (const char *agent, const char *key_sha256, FILE *f_cleartext, FILE *f_ciphertext)</td></tr>
<tr class="memdesc:a2f95c12bba3517287dc11017325a53c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encrypt a file for later decryption by <a class="el" href="libagentcrypt_8h.html#a65bac94e1760a518cbae4748170a3f14" title="Decrypt a file encrypted by agc_fencrypt() ">agc_fdecrypt()</a>  <a href="#a2f95c12bba3517287dc11017325a53c0">More...</a><br /></td></tr>
<tr class="separator:a2f95c12bba3517287dc11017325a53c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65bac94e1760a518cbae4748170a3f14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a65bac94e1760a518cbae4748170a3f14">agc_fdecrypt</a> (const char *agent, FILE *f_ciphertext, FILE *f_cleartext)</td></tr>
<tr class="memdesc:a65bac94e1760a518cbae4748170a3f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrypt a file encrypted by <a class="el" href="libagentcrypt_8h.html#a2f95c12bba3517287dc11017325a53c0" title="Encrypt a file for later decryption by agc_fdecrypt() ">agc_fencrypt()</a>  <a href="#a65bac94e1760a518cbae4748170a3f14">More...</a><br /></td></tr>
<tr class="separator:a65bac94e1760a518cbae4748170a3f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10f101e8d7e6f43c6b8f5e8c12722202"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a10f101e8d7e6f43c6b8f5e8c12722202">agc_to_b64</a> (const uint8_t *in, size_t in_size, char **out, size_t *out_size)</td></tr>
<tr class="memdesc:a10f101e8d7e6f43c6b8f5e8c12722202"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode a block of data into a string (base64 format with no padding)  <a href="#a10f101e8d7e6f43c6b8f5e8c12722202">More...</a><br /></td></tr>
<tr class="separator:a10f101e8d7e6f43c6b8f5e8c12722202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199ce908194e9543ab79e63a48af5758"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a199ce908194e9543ab79e63a48af5758">agc_from_b64</a> (const char *in, uint8_t **out, size_t *out_size)</td></tr>
<tr class="memdesc:a199ce908194e9543ab79e63a48af5758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a string (base64 format with no padding) to a block of data.  <a href="#a199ce908194e9543ab79e63a48af5758">More...</a><br /></td></tr>
<tr class="separator:a199ce908194e9543ab79e63a48af5758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3ed40ea59ef584a4a29ff9a4ca1962"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a6f3ed40ea59ef584a4a29ff9a4ca1962">agc_version</a> (void)</td></tr>
<tr class="memdesc:a6f3ed40ea59ef584a4a29ff9a4ca1962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the library version.  <a href="#a6f3ed40ea59ef584a4a29ff9a4ca1962">More...</a><br /></td></tr>
<tr class="separator:a6f3ed40ea59ef584a4a29ff9a4ca1962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab136dcbbb04870187fa30293f6fa8d46"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#ab136dcbbb04870187fa30293f6fa8d46">agc_malloc</a> (size_t size)</td></tr>
<tr class="memdesc:ab136dcbbb04870187fa30293f6fa8d46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamically allocate and lock a secure buffer.  <a href="#ab136dcbbb04870187fa30293f6fa8d46">More...</a><br /></td></tr>
<tr class="separator:ab136dcbbb04870187fa30293f6fa8d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b4a0b1adfdf77fe29ed53c57cf74bce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libagentcrypt_8h.html#a2b4a0b1adfdf77fe29ed53c57cf74bce">agc_free</a> (void *buf, size_t size)</td></tr>
<tr class="memdesc:a2b4a0b1adfdf77fe29ed53c57cf74bce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zero fill, unlock and free a dynamically allocated secure buffer.  <a href="#a2b4a0b1adfdf77fe29ed53c57cf74bce">More...</a><br /></td></tr>
<tr class="separator:a2b4a0b1adfdf77fe29ed53c57cf74bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af2edc5b8b7ab4c5ebab073315f3d1caf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_encrypt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key_sha256</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>cleartext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cleartext_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pad_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>ciphertext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ciphertext_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encrypt and authenticate a block of data, for later decryption by <a class="el" href="libagentcrypt_8h.html#a0539aac42176c2bf7115ed55cd41a41c" title="Decrypt and verify a block of data encrypted by agc_encrypt() ">agc_decrypt()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agent</td><td>The ssh-agent UNIX domain socket bind address. If NULL the content of the SSH_AUTH_SOCK environment variable is used instead. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_sha256</td><td>Pointer to a string containing the SHA256 fingerprint of the SSH key to be used for encryption. This can be obtained by running the following command (openssh &gt;= 6.8 required): <pre class="fragment">ssh-add -E sha256 -l </pre> The string may or may not begin with "SHA256:" The first key whose fingerprint starts with the string specified is selected. If NULL the first key is chosen automatically. Only RSA and ED25519 keys are supported. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cleartext</td><td>Pointer to the data to be encrypted. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cleartext_size</td><td>Size of data to be encrypted. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pad_size</td><td>Padding size. A chunk of random data no larger than pad_size is added at the end of cleartext, such that the combined cleartext and pad size is a non-zero integer multiple of pad_size. A minimum of 16 is enforced if pad_size &lt; 16. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ciphertext</td><td>This function allocates the output data buffer dynamically and it stores a pointer to it into *ciphertext upon success. The buffer MUST be freed by calling <a class="el" href="libagentcrypt_8h.html#a2b4a0b1adfdf77fe29ed53c57cf74bce" title="Zero fill, unlock and free a dynamically allocated secure buffer. ">agc_free()</a> after use. Do NOT use the standard free() function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ciphertext_size</td><td>The size of the output buffer is stored into *ciphertext_size.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, -1 otherwise. Reasons for failure include <ul>
<li>the ssh key is not available: errno is set to ENOKEY </li>
<li>invalid data returned by ssh-agent: errno is set to EBADMSG </li>
<li>failure to allocate memory: errno is set to ENOMEM </li>
<li>invalid parameters: errno is set to EINVAL </li>
<li>any other C library error, including socket errors while communicating with ssh-agent: errno is left at the value set by the C library </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a0539aac42176c2bf7115ed55cd41a41c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_decrypt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ciphertext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ciphertext_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>cleartext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>cleartext_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrypt and verify a block of data encrypted by <a class="el" href="libagentcrypt_8h.html#af2edc5b8b7ab4c5ebab073315f3d1caf" title="Encrypt and authenticate a block of data, for later decryption by agc_decrypt() ">agc_encrypt()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agent</td><td>The ssh-agent UNIX domain socket bind address. If NULL the content of the SSH_AUTH_SOCK environment variable is used instead. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ciphertext</td><td>Pointer to the data to be decrypted. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ciphertext_size</td><td>Size of the data to be decrypted. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cleartext</td><td>This function allocates the output data buffer dynamically and it stores a pointer to it into *cleartext upon success. The buffer MUST be freed by calling <a class="el" href="libagentcrypt_8h.html#a2b4a0b1adfdf77fe29ed53c57cf74bce" title="Zero fill, unlock and free a dynamically allocated secure buffer. ">agc_free()</a> after use. Do NOT use the standard free() function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cleartext_size</td><td>The size of the output buffer is stored into *ciphertext_size upon success.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, -1 otherwise. Reasons for failure include <ul>
<li>the ssh key required to decrypt is not available: errno is set to ENOKEY </li>
<li>invalid data returned by ssh-agent or failure to decrypt: errno is set to EBADMSG </li>
<li>failure to allocate memory: errno is set to ENOMEM </li>
<li>invalid parameters: errno is set to EINVAL </li>
<li>any other C library error, including socket errors while communicating with ssh-agent: errno is left at the value set by the C library </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a2f95c12bba3517287dc11017325a53c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_fencrypt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key_sha256</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f_cleartext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f_ciphertext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encrypt a file for later decryption by <a class="el" href="libagentcrypt_8h.html#a65bac94e1760a518cbae4748170a3f14" title="Decrypt a file encrypted by agc_fencrypt() ">agc_fdecrypt()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agent</td><td>The ssh-agent UNIX domain socket bind address. If NULL the content of the SSH_AUTH_SOCK environment variable is used instead. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_sha256</td><td>Pointer to a string containing the SHA256 fingerprint of the SSH key to be used for encryption. This can be obtained by running the following command (openssh &gt;= 6.8 required): <pre class="fragment">ssh-add -E sha256 -l </pre> The string may or may not begin with "SHA256:" The first key whose fingerprint starts with the string specified is selected. If NULL the first key is chosen automatically. Only RSA and ED25519 keys are supported. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_cleartext</td><td>Pointer to the input stream. Cleartext is read from this stream. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_ciphertext</td><td>Pointer to the output stream. Ciphertext is written to this stream. Invalid data may have already been written to the output stream when an error is detected. Therefore it may be advisable to use a temporary file for output and delete it upon failure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, -1 otherwise. Reasons for failure include <ul>
<li>the ssh key is not available: errno is set to ENOKEY </li>
<li>invalid data returned by ssh-agent: errno is set to EBADMSG </li>
<li>failure to allocate memory: errno is set to ENOMEM </li>
<li>invalid parameters: errno is set to EINVAL </li>
<li>any other C library error, including socket errors while communicating with ssh-agent or file errors: errno is left at the value set by the C library </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a65bac94e1760a518cbae4748170a3f14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_fdecrypt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f_ciphertext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f_cleartext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrypt a file encrypted by <a class="el" href="libagentcrypt_8h.html#a2f95c12bba3517287dc11017325a53c0" title="Encrypt a file for later decryption by agc_fdecrypt() ">agc_fencrypt()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agent</td><td>The ssh-agent UNIX domain socket bind address. If NULL the content of the SSH_AUTH_SOCK environment variable is used instead. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_ciphertext</td><td>Pointer to the input stream. Ciphertext is read from this stream. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_cleartext</td><td>Pointer to the output stream. Cleartext is written to this stream. Invalid data may have already been written to the output stream when an error is detected. Therefore it may be advisable to use a temporary file for output and delete it upon failure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, -1 otherwise. Reasons for failure include <ul>
<li>the ssh key required to decrypt is not available: errno is set to ENOKEY </li>
<li>invalid data returned by ssh-agent or failure to decrypt: errno is set to EBADMSG </li>
<li>failure to allocate memory: errno is set to ENOMEM </li>
<li>invalid parameters: errno is set to EINVAL </li>
<li>any other C library error, including socket errors while communicating with ssh-agent or file errors: errno is left at the value set by the C library </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a10f101e8d7e6f43c6b8f5e8c12722202"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_to_b64 </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>in_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>out_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode a block of data into a string (base64 format with no padding) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>Pointer to the data to be encoded. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_size</td><td>Size of the data to be encoded. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>This function allocates the output data buffer dynamically and it stores a pointer to it into *out upon success. The buffer MUST be freed by calling <a class="el" href="libagentcrypt_8h.html#a2b4a0b1adfdf77fe29ed53c57cf74bce" title="Zero fill, unlock and free a dynamically allocated secure buffer. ">agc_free()</a> after use. Do NOT use the standard free() function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_size</td><td>The size of the output buffer is stored into *out_size upon success.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, -1 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a199ce908194e9543ab79e63a48af5758"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_from_b64 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>out_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode a string (base64 format with no padding) to a block of data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>Pointer to a NULL terminated input string </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>This function allocates the output data buffer dynamically and it stores a pointer to it into *out upon success. The buffer MUST be freed by calling <a class="el" href="libagentcrypt_8h.html#a2b4a0b1adfdf77fe29ed53c57cf74bce" title="Zero fill, unlock and free a dynamically allocated secure buffer. ">agc_free()</a> after use. Do NOT use the standard free() function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_size</td><td>The size of the output buffer is stored into *out_size upon success.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, -1 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a6f3ed40ea59ef584a4a29ff9a4ca1962"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int agc_version </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the library version. </p>
<dl class="section return"><dt>Returns</dt><dd>an integer encoding the library version as 0xMMmmuu00 (MM=major, mm=minor, uu=micro) </dd></dl>

</div>
</div>
<a class="anchor" id="ab136dcbbb04870187fa30293f6fa8d46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* agc_malloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dynamically allocate and lock a secure buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to buffer upon success, NULL otherwise. The buffer MUST be freed by calling <a class="el" href="libagentcrypt_8h.html#a2b4a0b1adfdf77fe29ed53c57cf74bce" title="Zero fill, unlock and free a dynamically allocated secure buffer. ">agc_free()</a> after use. Do NOT use the standard free() function. </dd></dl>

</div>
</div>
<a class="anchor" id="a2b4a0b1adfdf77fe29ed53c57cf74bce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agc_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zero fill, unlock and free a dynamically allocated secure buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Pointer to buffer. If NULL no action is taken. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of buffer. It MUST match the buffer size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
